{"version":3,"sources":["../../../src/usingDB/controllers/bankdetailscontroller.js"],"names":["myData","Status","RequestTime","MessageDetails","code","Message","PayLoad","bankdetails","getBankDetail","req","res","console","log","text","db","query","params","ifsc","limit","offset","rows","Date","status","send","JSON","stringify","getBranchDetail","bankname","city"],"mappings":"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","file":"bankdetailscontroller.js","sourcesContent":["\nimport db from '../db';\n\nlet myData = {\n  Status: null,\n  RequestTime: null,\n  MessageDetails: {\n    code:null,\n    Message:null\n  },\n  PayLoad: null\n}\nconst bankdetails = {\n  /*\n  * Get A Bank detail\n  * @param {object} req \n  * @param {object} res\n  * @returns {object} bankbranch object\n  */\n\n\n  async getBankDetail(req, res) {\n    console.log(req);\n    \n    const text = 'SELECT * FROM bank_branches WHERE ifsc = $1 LIMIT $2 OFFSET $3';\n    try {\n      \n      const { rows } = await db.query(text, [req.params.ifsc, req.params.limit, req.params.offset]);\n      console.log(req);\n      if (!rows[0]) {\n        \n        myData.Status = \"failure\";\n        myData.RequestTime = new Date()\n        myData.MessageDetails.code = 0;\n        myData.MessageDetails.Message = \"Bank details not found\";\n        myData.PayLoad = [];\n        \n        return res.status(404).send(myData);\n      }\n      myData.Status = \"success\";\n      myData.MessageDetails.code = 1;\n      myData.RequestTime = new Date()\n      myData.MessageDetails.Message = \"fetched\";\n      myData.PayLoad = rows;\n\n      return res.status(200).send(myData);\n    } catch (error) {\n      \n      myData.Status = \"error\";\n      myData.RequestTime = new Date()\n      myData.MessageDetails.code = -99;\n      myData.MessageDetails.Message = JSON.stringify(error);\n      myData.PayLoad = [];\n      return res.status(400).send(myData)\n    }\n  },\n  async getBranchDetail(req, res) {\n    const text = 'SELECT * FROM bank_branches WHERE bank_name = $1 AND city = $2 LIMIT $3 OFFSET $4';\n\n\n    try {\n      const { rows } = await db.query(text, [req.params.bankname, req.params.city, req.params.limit, req.params.offset]);\n      console.log(text);\n      if (!rows[0]) {\n        myData.Status = \"failure\";\n        myData.MessageDetails.code = 0;\n        myData.RequestTime = new Date()\n        \n        myData.MessageDetails.Message = \"Bank details not found\";\n        myData.PayLoad = [];\n        return res.status(404).send(myData);\n      }\n      myData.Status = \"success\";\n      myData.RequestTime = new Date()\n      myData.MessageDetails.code = 1;\n      myData.MessageDetails.Message = \"fetched\";\n      myData.PayLoad = rows;\n      return res.status(200).send(myData);\n    } catch (error) {\n      \n      myData.Status = \"error\";\n      myData.MessageDetails.code = -99;\n      myData.RequestTime = new Date()\n      myData.MessageDetails.Message = JSON.stringify(error);\n      myData.PayLoad = [];\n      return res.status(400).send(myData)\n    }\n  }\n}\n\nexport default bankdetails;"]}